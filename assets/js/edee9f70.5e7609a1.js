"use strict";(self.webpackChunkkodsh_wiki_new=self.webpackChunkkodsh_wiki_new||[]).push([[1596],{6156:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>o});var i=n(5893),s=n(1151);const t={},l="Nintendo Nitro Binary - Overview",d={id:"universal/resources/nitro/nitro",title:"Nintendo Nitro Binary - Overview",description:"Author(s): Gonhex",source:"@site/docs/universal/resources/nitro/nitro.md",sourceDirName:"universal/resources/nitro",slug:"/universal/resources/nitro/",permalink:"/docs/universal/resources/nitro/",draft:!1,unlisted:!1,editUrl:"https://github.com/kingdom-of-ds-hacking/kingdom-of-ds-hacking.github.io/docs/universal/resources/nitro/nitro.md",tags:[],version:"current",frontMatter:{},sidebar:"universal_sidebar",previous:{title:"Resources",permalink:"/docs/category/resources"},next:{title:"Filesystem",permalink:"/docs/category/filesystem"}},c={},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Data Structure",id:"data-structure",level:2},{value:"Nitro File Header",id:"nitro-file-header",level:3},{value:"Nitro Section Header",id:"nitro-section-header",level:3},{value:"Specification",id:"specification",level:2},{value:"File System",id:"file-system",level:3},{value:"Graphics 2D",id:"graphics-2d",level:3},{value:"Graphics 3D",id:"graphics-3d",level:3},{value:"Sound",id:"sound",level:3},{value:"TODO",id:"todo",level:2}];function a(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"nintendo-nitro-binary---overview",children:"Nintendo Nitro Binary - Overview"}),"\n",(0,i.jsxs)(r.blockquote,{children:["\n",(0,i.jsxs)(r.p,{children:["Author(s): ",(0,i.jsx)(r.a,{href:"https://github.com/Gonhex",children:"Gonhex"})," ",(0,i.jsx)("br",{}),"\r\nResearch: ",(0,i.jsx)(r.a,{href:"https://problemkaputt.de",children:"NOCASH"}),", various"]}),"\n"]}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart BT;\r\n    FS(File System)--\x3eN(Nitro);\r\n    G2D(Graphics 2D)--\x3eN;\r\n    G3D(Graphics 3D)--\x3eN;\r\n    S(Sound)--\x3eN;"}),"\n",(0,i.jsx)(r.p,{children:"The Nintendo DS provides a set of data structures for fast memory access. These are used by the Pokemon main line games among others and can be grouped into different categories, see flowchart above. This documentation aims to provide information about the nitro system in an easily accessible way. Please note that the data is based on reverse engineering by various people and therefore mistakes can not be ruled out."}),"\n",(0,i.jsx)(r.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#data-structure",children:"Data Structure"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#nitro-file-header",children:"Nitro File Header"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#nitro-section-header",children:"Nitro Section Header"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#specification",children:"Specification"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#file-system",children:"File System"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#graphics-2d",children:"Graphics 2D"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#graphics-3d",children:"Graphics 3D"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#sound",children:"Sound"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#todo",children:"TODO"})}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"data-structure",children:"Data Structure"}),"\n",(0,i.jsx)(r.p,{children:"All nitro binaries follow a specific pattern and can be divided into two groups: files and sections. The data is defined in sections while files represent a collection of sections. This way the same type of data can be used by different files. All formats of one group share the same header."}),"\n",(0,i.jsx)(r.h3,{id:"nitro-file-header",children:"Nitro File Header"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-c",children:"struct NitroFileHeader\r\n{\r\n    /* 0x0 */ uint8_t signature[4];\r\n    /* 0x4 */ uint16_t byteOrderMark;\r\n    /* 0x6 */ uint8_t versionMinor;\r\n    /* 0x7 */ uint8_t versionMajor;\r\n    /* 0x8 */ uint32_t lengthFile;\r\n    /* 0xC */ uint16_t lengthHeader;\r\n    /* 0xE */ uint16_t numberSections;\r\n}; // entry size = 0x10\n"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Field Name"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Data Type"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"signature"}),(0,i.jsx)(r.td,{children:"Identify type of data content."}),(0,i.jsx)(r.td,{children:"uint8_t[]"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"byteOrderMark"}),(0,i.jsx)(r.td,{children:"Defines the byte order as UTF-16 character."}),(0,i.jsx)(r.td,{children:"uint16_t"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"versionMinor"}),(0,i.jsxs)(r.td,{children:["Minor nitro version number (fraction of the number). ",(0,i.jsx)(r.code,{children:"Major.Minor"})]}),(0,i.jsx)(r.td,{children:"uint8_t"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"versionMajor"}),(0,i.jsxs)(r.td,{children:["Major nitro version number (integer of the number). ",(0,i.jsx)(r.code,{children:"Major.Minor"})]}),(0,i.jsx)(r.td,{children:"uint8_t"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"lengthFile"}),(0,i.jsx)(r.td,{children:"Length of the nitro file, including all sections."}),(0,i.jsx)(r.td,{children:"uint32_t"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"lengthHeader"}),(0,i.jsxs)(r.td,{children:["Length of this header, always ",(0,i.jsx)(r.code,{children:"0x10"}),"."]}),(0,i.jsx)(r.td,{children:"uint16_t"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"numberSections"}),(0,i.jsx)(r.td,{children:"Number of sections within this file."}),(0,i.jsx)(r.td,{children:"uint16_t"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"nitro-section-header",children:"Nitro Section Header"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-c",children:"struct NitroSectionHeader\r\n{\r\n    /* 0x0 */ uint8_t signature[4];\r\n    /* 0x4 */ uint32_t lengthSection;\r\n}; // entry size = 0x8\n"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Field Name"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Data Type"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"signature"}),(0,i.jsx)(r.td,{children:"Identify type of data content."}),(0,i.jsx)(r.td,{children:"uint8_t[]"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"lengthSection"}),(0,i.jsx)(r.td,{children:"Length of the nitro section."}),(0,i.jsx)(r.td,{children:"uint32_t"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"specification",children:"Specification"}),"\n",(0,i.jsx)(r.h3,{id:"file-system",children:"File System"}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart BT;\r\n    NARC(N. Archive)--\x3eFS(File System);\r\n    TODO(...)--\x3eFS;"}),"\n",(0,i.jsx)(r.p,{children:"TODO: Some words about the file system."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/file_system/file_narc",children:"NARC - Nitro Archive"})}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"graphics-2d",children:"Graphics 2D"}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart BT;\r\n    NCLR(N. Color R.)--\x3eG2D(Graphics 2D);\r\n    NCGR(N. Character Graphic R.)--\x3eG2D;\r\n    NSCR(N. Screen R.)--\x3eG2D;\r\n    NCER(N. Cell R.)--\x3eG2D;\r\n    NANR(N. Animation R.)--\x3eG2D;\r\n    NMCR(N. Multi Cell R.)--\x3eG2D;\r\n    NMAR(N. Multi Animation R.)--\x3eG2D;"}),"\n",(0,i.jsx)(r.p,{children:"Two-dimensional graphics are processed as tiles. These are squared bitmaps with a side length of eight pixels. Depending on the required behavior of a sprite there are several files involved. One file alone is not enough to display a graphic. The dependencies are as follows:"}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart RL;\r\n    NCGR(N. Character Graphic R.)--\x3eNCLR(N. Color R.);\r\n    NSCR(N. Screen R.)--\x3eNCLR;\r\n    NSCR--\x3eNCGR;\r\n    NCER(N. Cell R.)--\x3eNCGR;\r\n    NCER--\x3eNCLR;\r\n    NAMR(N. Animation R.)--\x3eNCER;\r\n    NMCR(N. Multi Cell R.)--\x3eNAMR;\r\n    NMAR(N. Multi Animation R.)--\x3eNMCR;"}),"\n",(0,i.jsxs)(r.p,{children:["Unlike in other nitro formats the signatures of the 2D files and sections are reversed. I.e. instead of ",(0,i.jsx)(r.code,{children:'"NCLR"'}),", ",(0,i.jsx)(r.code,{children:'"RLCN"'})," is used."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_nclr",children:'NCLR ("RLCN") - Nitro Color Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_ncgr",children:'NCGR ("RGCN") - Nitro Character Graphic Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_nscr",children:'NSCR ("RCSN") - Nitro Screen Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_ncer",children:'NCER ("RECN") - Nitro Cell Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_nanr",children:'NANR ("RNAN") - Nitro Animation Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_nmcr",children:'NMCR ("RCMN") - Nitro Multi Cell Runtime'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_2d/file_nmar",children:'NMAR ("RAMN") - Nitro Multi Animation Runtime'})}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"graphics-3d",children:"Graphics 3D"}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart BT;\r\n    BMD0(B. Model 0)--\x3eG3D(Graphics 3D);\r\n    BTX0(B. Texture 0)--\x3eG3D;\r\n    TODO(...)--\x3eG3D;"}),"\n",(0,i.jsx)(r.p,{children:"TODO: Some words about 3D graphics."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_3d/file_bmd0",children:"BMD0 - Binary Model 0"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/universal/resources/nitro/graphics_3d/file_btx0",children:"BTX0 - Binary Texture 0"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"graphics_3d/file_.md",children:"???? - TODO"})}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"sound",children:"Sound"}),"\n",(0,i.jsx)(r.mermaid,{value:"flowchart BT;\r\n    TODO(...)--\x3eS(Sound);"}),"\n",(0,i.jsx)(r.p,{children:"TODO: Some words about the sound system."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"sound/file_.md",children:"???? - TODO"})}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"todo",children:"TODO"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Edit ",(0,i.jsx)(r.a,{href:"#file-system",children:"File System"})]}),"\n",(0,i.jsxs)(r.li,{children:["Edit ",(0,i.jsx)(r.a,{href:"#graphics-3d",children:"Graphics 3D"})]}),"\n",(0,i.jsxs)(r.li,{children:["Edit ",(0,i.jsx)(r.a,{href:"#sound",children:"Sound"})]}),"\n",(0,i.jsxs)(r.li,{children:["Document other formats in the same or similar style as ",(0,i.jsx)(r.code,{children:"Graphics 2D"})]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},1151:(e,r,n)=>{n.d(r,{Z:()=>d,a:()=>l});var i=n(7294);const s={},t=i.createContext(s);function l(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);